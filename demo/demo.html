<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica Neue, Ubuntu, Cantarell, Oxygen, Droid Sans, Fira Sans, sans-serif;
        }

        .table {
            display: table;
            border-collapse: collapse;
            width: 100%;
        }
        .thead, .tbody {
            display: table-row-group;
        }
        .tr {
            display: table-row;
        }
        .th, .td {
            display: table-cell;
            padding: 7px;
            border: 1px solid black;
        }
        .th {
            background: black;
            color: white;
            font-weight: bold;
        }
    </style>

    <script src="../dist/ooml.js"></script>
</head>

<body>
    <div id="texteditor-package">
        <template ooml-class="TextEditor">
            <textarea>{{ this.value }}</textarea>
        </template>
    </div>
    <main>
        <template ooml-class="Friend">
            <li><a href="{{ this.userId }}">{{ this.name }}</a></li>
        </template>

        <template ooml-class="PerformanceEntry">
            <div class="tr">
                <div class="td">{{ this.id }}</div>
                <div class="td">{{ this.jobTitle }}</div>
                <div class="td">{{ this.score }}</div>
            </div>
        </template>

        <template ooml-class="User">
            <ooml-property name="name"></ooml-property>
            <ooml-property name="performanceData">[
                { id: 234908, jobTitle: 'Head of no-scoping', score: 420 },
                { id: 543255, jobTitle: 'Noob pawning', score: 6969 },
                { id: 727224, jobTitle: 'Master String Reverser', score: 321 },
                { id: 123467, jobTitle: 'Bureau of bureaucracy', score: 9001 },
                { id: 578546, jobTitle: 'Console Pleb Tears Collection', score: 1337 },
                { id: 248968, jobTitle: 'Government worker (Beneficiary)', score: 99 },
            ]</ooml-property>
            <ooml-method name="countLettersInName">
                function() {
                    return this.name.length;
                }
            </ooml-method>

            <article class="user">
                <h1 class="title">Welcome {{ this.name }} (@{{ this.username }})</h1>
                <span class="subtitle">Here's what we know about you as of {{ this.lastUpdated }}</span>
                <h2>Personal</h2>
                <dl>
                    <dt>Age</dt>
                    <dd>{{ this.age }} (born {{ this.birthday }})</dd>
                    <dt>Gender</dt>
                    <dd>{{ this.gender }}</dd>
                    <dt>Ethnicity</dt>
                    <dd>{{ this.ethnicity }}</dd>
                </dl>

                <h2>Account</h2>
                <span>Note: not all information may be up to date. Last updated: {{ service.lastUpdated }}</span>
                <br>
                <label>
                    Username
                    <input ooml-expose="newUsername" oninput="this.username = this.$newUsername.value.trim();" value="{{ this.username }}">
                </label>
                <br>
                <label>
                    Password
                    <input ooml-expose="newPassword" type="password" value="{{ this.password }}">
                </label>
                <button onclick="alert(`Password: ${this.$newPassword.value}`); console.log(arguments);">Submit</button>
                <br>
                <a href="/profiles/{{ this.userId }}">Go to my profile</a>
                <br>
                <button>Temporary disable my account</button>
                <button>Delete my account</button>

                <h2>Recently contacted friends</h2>
                <ul>
                    { for Friend of this.contactedFriends }
                </ul>
                <span>Send a message</span>
                <div>{ TextEditor.class this.postMessage }</div>

                <h2>Performance</h2>
                <div class="table">
                    <div class="thead">
                        <div class="th">ID</div>
                        <div class="th">Job Title</div>
                        <div class="th">Score</div>
                    </div>
                    <div class="tbody">
                        { for PerformanceEntry of this.performanceData }
                    </div>
                </div>
            </article>
        </template>

        <article ooml-instantiate="User wilson"></article>
    </main>

    <script>
        var TextEditor = OOML.init({
                rootElem: '#texteditor-package'
            });

        var globals = {
                TextEditor: {
                    class: TextEditor.classes.TextEditor,
                },
                service: {
                    lastUpdated: new Date(2015, 9, 23),
                }
            };

        var ooml = OOML.init({
            rootElem: 'main',
            globals: globals,
        });

        var wilson = ooml.objects.wilson;
        wilson.assign({
            username: "appropriateUsername",
            lastUpdated: new Date(2016, 9, 3, 7, 1, 1),
            age: 14,
            birthday: new Date(1931, 4, 5).toDateString(),
            gender: 'Undecided voter',
            ethnicity: 'PCMaster',
            password: 'l33th4ck3r',
            contactedFriends: [
                { userId: 2349243589, name: "John Joe" },
                { userId: 4594395534, name: "Jane Joe" },
                { userId: 2586848393, name: "Joe Donn" },
                { userId: 4568924323, name: "Jane Yo" },
                { userId: 8934590834, name: "Bon Joe" },
                { userId: 7923411114, name: "Von Jour" },
                { userId: 9185724444, name: "Spanish Inquisition" },
                { userId: 7852396541, name: "Donald Trump" },
            ],
            postMessage: {
                value: "Send something to ya mates",
            },
        });
    </script>
</body>

</html>